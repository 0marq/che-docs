---
title: "Workspace Agent"
keywords: framework, agent, workspace
tags: [extensions, assembly, dev-docs]
sidebar: user_sidebar
permalink: workspace-agent.html
folder: developer-guide
---

== Enabling Debug on WS Agent

1) Configure your WS Agent Tomcat JPDA launching parameters with following Workspace environment variables:

- `WSAGENT_DEBUG` - set true to enable JPDA mode for WS Aagent Tomcat, `false` by default;
- `WSAGENT_DEBUG_PORT` - configure JPDA port, 4403 by default;
- `WSAGENT_DEBUG_SUSPEND` - set `y` to enable JPDA suspend mode, `n` by default.

image::wsagent/wsagent-debug-env.png[]

2) Get host and port for connecting to WS Agent Tomcat. This depends on the infrastructure:

== Connecting to WS Agent tomcat with debugger:

You will need host and port for debugger. The process of it's acquiring differs depends on Che Infrastructure:

#Docker

* Before starting a workspace, define a link:servers.html[Server] for your JPDA port.

image::wsagent/wsagent-debug-server.png[]

* You will need to use port of your host, that is mapped to container's port. It can be found in Workspace Servers of running workspace:

image::wsagent/wsagent-debug-docker.png[]

#Kubernetes / Openshift

To connect with debugger from outside of the cluster, use Port Forwarding to forward port from your workspace Pod to the port on your localhost.

For Kubernetes:

Get list of pods and find the name of your workspace pod.
```
kubectl get pods --all-namespaces
```

Use this to get the namespace of your <POD_NAME> pod.
```
kubectl describe pod <POD_NAME> #
```

```
# replace <JPDA_PORT> with port of your configured JPDA Tomcat
# replace <LOCAL_PORT> with the port on your host, that you will connect to with your debugger
# replace <POD_NAME> with the name of the workspace pod
# replace <NAMESPACE> with the namespace of the workspace pod
kubectl port-forward <POD_NAME> <LOCAL_PORT>:<JPDA_PORT>--namespace=<NAMESPACE>
```

For Openshift:

Use this to get name of your pod.
```
oc login
oc get pods #
```

If the pod belongs to the different namespace (if Che is configured to create OpenShift Project per Workspace), use `oc use WORKSPACE_ID` to switch to that project and run `oc get pods` again

```
# replace <JPDA_PORT> with port of your configured JPDA Tomcat
# replace <LOCAL_PORT> with the port on your host, that you will connect to with your debugger
# replace <POD_NAME> name with the name of the workspace pod
oc port-forward <POD_NAME> <LOCAL_PORT>:<JPDA_PORT>
```

Connect to your debugger using `localhost` as host, and your local port, which is forwarded to workspace pod.
