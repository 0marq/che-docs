// creating-and-configuring-a-new-che-7-workspace

[id="configuring-the-workspace-and-adding-tooling_{context}"]
= Configuring the workspace and adding tooling

[discrete]
== Adding plug-ins

Che 7 plug-ins replace the Che 6 installers.
The following table lists the Che 7 plug-ins that have replaced the Che 6 installers.

.Che 7 plug-ins that have replaced the Che 6 installers
[width="80%", options="header,footer"]
|===
| CHE6  Installer | CHE7 Plug-in
| org.eclipse.che.ws-agent
 | Deprecated and not necessary
| org.eclipse.che.terminal
| Deprecated and not necessary anymore-
| org.eclipse.che.exec | Che machine-exec Service
| org.eclipse.che.ls.java | Language Support for Java(TM)
|===

[discrete]
=== Procedure

To add plug-ins to your workspace:

. Click the *Plugins* tab.
. Enable the plug-in that you want to add and click btn:[Save].
+
image::workspaces/adding-pluggins-to-workspace.png[link="{imagesdir}/workspaces/adding-pluggins-to-workspace.png"]

[discrete]
== Defining the workspace editor

[discrete]
=== Procedure

To define the editor that you want to use with the workspace:

. Click the Editors tab.
+
NOTE: The recommended editor for Che 7 is the *theia-ide* editor.

. Enable the editor that you want to add and click btn:[Save].
+
image::workspaces/definin-the-workspace-editor.png[link="{imagesdir}/workspaces/definin-the-workspace-editor.png"]
+
. Click the *Devfile* tab to view the changes.
+
image::workspaces/workspace-devfile.png[link="{imagesdir}/workspaces/workspace-devfile.png"]

[discrete]
== Defining  the specific container images

[discrete]
=== Procedure

To add a new container image:

. Copy the following section from the *devfile* into *components*:
+
[source,yaml]
----
- mountSources: true
   command:
     - sleep
   args:
     - infinity
   memoryLimit: 1Gi
   alias: maven3-jdk11
   type: dockerimage
   endpoints:
     - name: 8080/tcp
       port: 8080
   volumes:
     - name: projects
       containerPath: /projects
   image: 'maven:3.6.0-jdk-11'
----
+
. If you are using type: `kubernetes` or type: `openshift`, you must:
* Use seperate recipe files
* Or, add the content as a *referenceContent*
+
.. To use separate recipe files, the paths can be relative or absolute. For example:
+
[source,yaml]
----
...
    type: kubernetes
    reference: deploy_k8s.yaml
...
----
+
[source,yaml]
----
...
    type: openshift
    reference: deploy_openshift.yaml
...
----
+
.. To Add as a `referenceContent`:
+
The referenceContent field replaces the Che 6 recipe content.
+
image::workspaces/che-6-workspace-confg.png[link="{imagesdir}/workspaces/che-6-workspace-confg.png"]
+
. Add a Che 6 recipe content to the Che 7 devfile as a referenceContent:

.. Click the *Containers* tab (*Workspace -> Details -> Containers*).
+
image::workspaces/edit-the-container.png[link="{imagesdir}/workspaces/edit-the-container.png"]
+
.. Copy the Che 6 recipe and paste it into the separate Che 7 component as a *referenceContent*.
+
image::workspaces/component_as_a_referenceContent.png[link="{imagesdir}/workspaces/component_as_a_referenceContent.png"]
+
.. Set the type from the origin Che 6 configuration. The following is an example of the resultant file :
+
[source,yaml]
----
  type: kubernetes
  referenceContent: |
    apiVersion: v1
    kind: Pod
    metadata:
     name: ws
    spec:
     containers:
      -
       image: 'rhche/centos_jdk8:latest'
       name: dev
       resources:
       limits:
         memory: 512Mi
----
+
. Copy the required fields from the old workspace (image, volumes, endpoints). For example:
+
image::workspaces/workspace_config_Che_6.png[link="{imagesdir}/workspaces/workspace_config_Che_6.png"]
+
image::workspaces/workspace_devfile_che_7_.png[link="{imagesdir}/workspaces/workspace_devfile_che_7_.png"]
+
.СHE6/СHE7 equivalence table
[width="80%", options="header,footer"]
|===
| CHE6 workspace config | CHE7 workspace devfile
| environments[‘defaultEnv’].machines[‘target’].servers | components[n].endpoints
| environments[‘defaultEnv’].machines[‘machineName’].volumes | components[n].volumes
| environments[‘defaultEnv’].recipe.type | components[n].type
| environments[‘defaultEnv’].recipe.content | components[n].image
|===
+
. Change the `memoryLimit` and `alias` variables, if needed. Here, the field `alias` is used for setting a name for the component. It is generated automatically from the `image` field, if not set.
+
[source,yaml]
----
  image: 'maven:3.6.0-jdk-11'
  alias: maven3-jdk11
----
+
. Change the `memoryLimit` field to specify the `RAM` required for the component.
+
[source,yaml]
----
  alias: maven3-jdk11
  memoryLimit: 256M
----
+
. Open the *Devfile* tab to see the changes.
+
image::workspaces/devfile-tab.png[link="{imagesdir}/workspaces/devfile-tab.png"]
+
. Repeat the above steps to add additional container images.

[discrete]
== Adding commands to your workspace

The following is a comparison between a Workspace configuration commands in Che 6 (Figure 1.) and a Workspace configuration commands in Che 7 (Figure 2.):

.An example of the Workspace configuration commands in Che 6
image::workspaces/workspace-devfile.png[link="{imagesdir}/workspaces/workspace-devfile.png"]

.An example of the Workspace configuration commands in Che 7
image::workspaces/workspace-devfile.png[link="{imagesdir}/workspaces/workspace-devfile.png"]

.СHE6/СHE7 equivalence table
[width="80%", options="header,footer"]
|===
| CHE6 workspace config | CHE7 workspace devfile
| environments[‘defaultEnv’].commands[n].name | commands[n].name
| environments[‘defaultEnv’].commands[n].actions.command | components[n].commandLine
|===

[discrete]
=== Procedure

To define commands to your workspace, edit the workspace devfile:

. Add (or replace) the `commands` section with the first command. Change the `name` and the `command` fields from the original workspace configuration (see the preceding equivalence table).
+
[source,yaml]
----
commands:
  - name: build
    actions:
      - type: exec
        command: mvn clean install
----
+
. Copy the following YAML into the `commands` section to add a new command. Change the `name` and the `command` fields from the original workspace configuration (see the preceding equivalence table).
+
[source,yaml]
----
  - name: build and run
    actions:
      - type: exec
        command: mvn clean install && java -jar
----
+
. Optionally, add the field `component` into `actions`. This indicates the component alias where the command will be performed.
. Repeat step 2 to add more commands to the devfile.
. Click the *Devfile* tab to view the changes.
+
image::workspaces/workspace-devfile-changes.png[link="{imagesdir}/workspaces/workspace-devfile-changes.png"]
+
. Save changes and start the new Che 7 workspace.
+
image::workspaces/save-and-start-the-new-che-workspace.png[link="{imagesdir}/workspaces/save-and-start-the-new-che-workspace.png"]
