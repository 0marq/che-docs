// This assembly is included in the following assemblies:
//
// securing-che

:parent-context-of-authentication-inside-the-workspace: {context}

[id='authentication-inside-the-workspace_{context}']
= Authentication inside the workspace

// The `context` attribute enables module reuse. Every module's ID
// includes {context}, which ensures that the module has a unique ID even if
// it is reused multiple times in a guide.
:context: authentication-inside-the-workspace

// The following block is rendered only if the `internal` variable is set.
// The table shows various metadata useful when editing this file.
ifdef::internal[]
[cols="1,4"]
|===
| Included in |
LIST OF ASSEMBLIES
| User story |
USER STORY
| Jira |
JIRA LINK
| BZ |
BUGZILLA LINK
| SMEs |
SME NAMES
| SME Ack |
YES/NO
| Peer Ack |
YES/NO
|===
endif::[]

Workspace containers may contain services that must be protected with authentication. Such protected services are called `secure`. For this purpose, machine authentication mechanism should be used. Machine tokens avoid passing the Keycloak tokens to the workspace containers (which can be potentially insecure). Also, Keycloak tokens may have relatively smaller lifetime and require periodic renewal or refresh which is difficult to manage and keep in sync with the same user session tokens on clients.

image::extensibility/securing_che_authentication_inside_the_workspace.png[]

include::con_creating-secure-servers.adoc[leveloffset=+1]

include::con_workspace-jwt-token-.adoc[leveloffset=+1]

include::con_machine-token-validation.adoc[leveloffset=+1]

// The following line is necessary to allow assemblies be included in other
// assemblies. It restores the `context` variable to its previous state.
:context: {parent-context-of-authentication-inside-the-workspace}
