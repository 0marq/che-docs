// This assembly is included in the following assemblies:
//
// che-7-architectural-elements

// This assembly can be included from other assemblies using the following
// include statement:
// include::<path>/assembly_che-workspace-controller.adoc[leveloffset=+1]

// The following line is necessary to allow assemblies be included in other
// assemblies. It restores the `context` variable to its previous state.
:parent-context-of-che-workspace-controller: {context}

// The file name and the ID are based on the assembly title.
// For example:
// * file name: assembly_my-assembly-a.adoc
// * ID: [id='assembly_my-assembly-a_{context}']
// * Title: = My assembly A
//
// The ID is used as an anchor for linking to the module.
// Avoid changing it after the module has been published
// to ensure existing links are not broken.
//
// In order for  the assembly to be reusable in other assemblies in a guide,
// include {context} in the ID: [id='a-collection-of-modules_{context}'].
//
// If the assembly covers a task, start the title with a verb in the gerund
// form, such as Creating or Configuring.
[id='che-workspace-controller_{context}']
= Che workspace controller

// The `context` attribute enables module reuse. Every module's ID
// includes {context}, which ensures that the module has a unique ID even if
// it is reused multiple times in a guide.
:context: che-workspace-controller

// The following block is rendered only if the `internal` variable is set.
// The table shows various metadata useful when editing this file.
ifdef::internal[]
[cols="1,4"]
|===
| Included in |
LIST OF ASSEMBLIES
| User story |
USER STORY
| Jira |
JIRA LINK
| BZ |
BUGZILLA LINK
| SMEs |
SME NAMES
| SME Ack |
YES/NO
| Peer Ack |
YES/NO
|===
endif::[]


// The following include statements pull in the module files that comprise
// the assembly. Include any combination of concept, procedure, or reference
// modules required to cover the user story. You can also include other
// assemblies.

The workspaces controller manages the container-based development environments: Che workspaces. It can be deployed in the following distinct configurations:

* *Single-user*: No authentication service is set up. Development environments are not secured. This configuration requires fewer resources. It is more adapted for local installations like when using minikube.

* *Multi-user*: This is a multi-tenant configuration. Development environments are secured and this configuration requires more resources. Appropriate for cloud installations.

The different services that are part of the Che workspaces controller are shown in the following diagram. Note that Keycloak and Postgres are only needed in the multi-user configuration.

image::extensibility/che-workspaces-controllers.png[]

include::con_che-server.adoc[leveloffset=+1]

include::con_user-dashboard.adoc[leveloffset=+1]

include::con_devfile-registry.adoc[leveloffset=+1]

include::con_plug-in-registry.adoc[leveloffset=+1]

include::con_postgres.adoc[leveloffset=+1]

include::con_keycloak.adoc[leveloffset=+1]



// The following line is necessary to allow assemblies be included in other
// assemblies. It restores the `context` variable to its previous state.
:context: {parent-context-of-che-workspace-controller}
